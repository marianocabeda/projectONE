<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Verificación de Email | ONE Internet</title>
  <link href="/public/output.css" rel="stylesheet" />
</head>

<body class="font-sans flex flex-col min-h-screen bg-gray-50">
  <!-- HEADER dinámico -->
  <div id="header"></div>

  <!-- Contenido principal -->
  <main class="flex-grow flex items-center justify-center py-12 px-4">
    <div class="w-full max-w-2xl">
      
      <!-- Estado: Verificando (mostrado inicialmente) -->
      <div id="verifying-state" class="text-center">
        <div class="bg-white rounded-2xl shadow-xl border border-gray-200 p-8 sm:p-12">
          <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-principal-500 mx-auto mb-6" role="status" aria-label="Verificando"></div>
          <h1 class="text-2xl font-bold text-gray-900 mb-2">Verificando tu email...</h1>
          <p class="text-gray-600">Por favor espera mientras confirmamos tu cuenta.</p>
        </div>
      </div>

      <!-- Estado: Éxito (oculto inicialmente) -->
      <div id="success-state" class="hidden">
        <div class="bg-white rounded-2xl shadow-xl border border-gray-200 p-8 sm:p-12 text-center fade-in-up">
          
          <!-- Icono de éxito animado -->
          <div class="mb-8">
            <svg class="mx-auto w-20 h-20 text-exito-500" viewBox="0 0 80 80" aria-hidden="true">
              <circle cx="40" cy="40" r="38" class="opacity-10" fill="currentColor" />
              <circle cx="40" cy="40" r="30" class="opacity-20" fill="currentColor" />
              <path class="checkmark" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" d="M25 40 L35 50 L55 30"/>
            </svg>
          </div>

          <!-- Título y mensaje -->
          <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4">
            ¡Email verificado con éxito!
          </h1>
          <p class="text-base sm:text-lg text-gray-600 mb-2">
            Tu cuenta ha sido activada correctamente.
          </p>
          <p class="text-sm sm:text-base text-gray-500 mb-8">
            Ya podés acceder a todos los servicios de ONE Internet.
          </p>

          <!-- Botones de acción -->
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a 
              href="/login" 
              class="inline-flex items-center justify-center px-6 py-3 bg-principal-500 text-white font-semibold rounded-lg hover:bg-principal-600 transition shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-principal-500"
            >
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
              </svg>
              Iniciar sesión
            </a>
            <a 
              href="/" 
              class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200 hover:border-principal-500 hover:text-principal-500 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-200"
            >
              Volver al inicio
            </a>
          </div>

          <!-- Información adicional -->
          <div class="mt-10 pt-8 border-t border-gray-200">
            <p class="text-sm text-gray-500">
              ¿Tenés problemas para acceder? 
              <a href="https://wa.me/5492634217506" target="_blank" rel="noopener noreferrer" class="text-principal-600 hover:text-principal-700 font-medium underline decoration-1 underline-offset-2 hover:decoration-2 transition-all">
                Contactanos
              </a>
            </p>
          </div>
        </div>
      </div>

      <!-- Estado: Expirado -->
      <div id="expired-state" class="hidden">
        <div class="bg-white rounded-2xl shadow-xl border-l-4 border-advertencia-500 p-8 sm:p-12 text-center fade-in-up">
          <div class="mb-8">
            <svg class="mx-auto w-20 h-20 text-advertencia-500" viewBox="0 0 80 80" aria-hidden="true">
              <circle cx="40" cy="40" r="38" class="opacity-10" fill="currentColor" />
              <circle cx="40" cy="40" r="30" class="opacity-20" fill="currentColor" />
              <path fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" d="M40 25 v20 M40 55 v2"/>
            </svg>
          </div>
          <h1 class="text-2xl sm:text-3xl font-bold text-advertencia-800 mb-4">
            El enlace de verificación ha expirado
          </h1>
          <p class="text-base sm:text-lg text-gray-600 mb-2">
            Los enlaces de verificación tienen una validez limitada por seguridad.
          </p>
          <p class="text-sm text-gray-500 mb-8">
            Solicitá un nuevo enlace para verificar tu cuenta.
          </p>
          <div class="bg-advertencia-50 border border-advertencia-200 rounded-lg p-4 mb-6">
            <p class="text-sm text-advertencia-800 mb-3 font-medium">
              ¿Necesitás un nuevo enlace de verificación?
            </p>
            <button 
              id="resend-verification-btn"
              class="inline-flex items-center justify-center px-4 py-2 bg-advertencia-600 text-white font-medium rounded-lg hover:bg-advertencia-700 transition text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-advertencia-400"
            >
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Reenviar email de verificación
            </button>
          </div>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/login" class="inline-flex items-center justify-center px-6 py-3 bg-principal-500 text-white font-semibold rounded-lg hover:bg-principal-600 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-principal-500">
              Ir al login
            </a>
            <a href="/" class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200 hover:border-principal-500 hover:text-principal-500 transition">
              Volver al inicio
            </a>
          </div>
        </div>
      </div>

      <!-- Estado: Inválido -->
      <div id="invalid-state" class="hidden">
        <div class="bg-white rounded-2xl shadow-xl border-l-4 border-error-500 p-8 sm:p-12 text-center fade-in-up">
          <div class="mb-8">
            <svg class="mx-auto w-20 h-20 text-error-500" viewBox="0 0 80 80" aria-hidden="true">
              <circle cx="40" cy="40" r="38" class="opacity-10" fill="currentColor" />
              <circle cx="40" cy="40" r="30" class="opacity-20" fill="currentColor" />
              <path fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" d="M30 30 L50 50 M50 30 L30 50"/>
            </svg>
          </div>
          <h1 class="text-2xl sm:text-3xl font-bold text-error-800 mb-4">
            El enlace no es válido
          </h1>
          <p class="text-base sm:text-lg text-gray-600 mb-2">
            El token proporcionado no existe o ya fue utilizado.
          </p>
          <p class="text-sm text-gray-500 mb-8">
            Por favor, verifica que copiaste correctamente el enlace del correo.
          </p>
          <div class="bg-error-50 border border-error-200 rounded-lg p-4 mb-6">
            <p class="text-sm text-error-800 mb-3 font-medium">
              ¿Necesitás un nuevo enlace de verificación?
            </p>
            <button 
              id="resend-verification-btn"
              class="inline-flex items-center justify-center px-4 py-2 bg-error-600 text-white font-medium rounded-lg hover:bg-error-700 transition text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-error-400"
            >
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Reenviar email de verificación
            </button>
          </div>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/login" class="inline-flex items-center justify-center px-6 py-3 bg-principal-500 text-white font-semibold rounded-lg hover:bg-principal-600 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-principal-500">
              Ir al login
            </a>
            <a href="/registro" class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200 hover:border-principal-500 hover:text-principal-500 transition">
              Registrarse de nuevo
            </a>
          </div>
        </div>
      </div>

      <!-- Estado: Error general -->
      <div id="error-state" class="hidden">
        <div class="bg-white rounded-2xl shadow-xl border-l-4 border-error-500 p-8 sm:p-12 text-center fade-in-up">
          <div class="mb-8">
            <svg class="mx-auto w-20 h-20 text-error-500" viewBox="0 0 80 80" aria-hidden="true">
              <circle cx="40" cy="40" r="38" class="opacity-10" fill="currentColor" />
              <circle cx="40" cy="40" r="30" class="opacity-20" fill="currentColor" />
              <path fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" d="M40 25 v20 M40 55 v2"/>
            </svg>
          </div>
          <h1 class="text-2xl sm:text-3xl font-bold text-error-800 mb-4">
            Ocurrió un error al verificar tu correo
          </h1>
          <p class="text-base sm:text-lg text-gray-600 mb-8">
            Por favor, intenta nuevamente o solicita un nuevo enlace de verificación.
          </p>
          <div class="bg-error-50 border border-error-200 rounded-lg p-4 mb-6">
            <p class="text-sm text-error-800 mb-3 font-medium">
              ¿Necesitás ayuda?
            </p>
            <button 
              id="resend-verification-btn"
              class="inline-flex items-center justify-center px-4 py-2 bg-error-600 text-white font-medium rounded-lg hover:bg-error-700 transition text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-error-400"
            >
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Reenviar email de verificación
            </button>
          </div>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/login" class="inline-flex items-center justify-center px-6 py-3 bg-principal-500 text-white font-semibold rounded-lg hover:bg-principal-600 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-principal-500">
              Ir al login
            </a>
            <a href="/registro" class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200 hover:border-principal-500 hover:text-principal-500 transition">
              Registrarse de nuevo
            </a>
          </div>
        </div>
      </div>

      <!-- Estado: Ya verificado -->
      <div id="already-verified-state" class="hidden">
        <div class="bg-white rounded-2xl shadow-xl border-l-4 border-blue-500 p-8 sm:p-12 text-center fade-in-up">
          <div class="mb-8">
            <svg class="mx-auto w-20 h-20 text-blue-500" viewBox="0 0 80 80" aria-hidden="true">
              <circle cx="40" cy="40" r="38" class="opacity-10" fill="currentColor" />
              <circle cx="40" cy="40" r="30" class="opacity-20" fill="currentColor" />
              <path fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" d="M35 40 h10 M40 35 v10"/>
            </svg>
          </div>
          <h1 class="text-2xl sm:text-3xl font-bold text-blue-800 mb-4">
            Tu correo ya está verificado
          </h1>
          <p class="text-base sm:text-lg text-gray-600 mb-2">
            No necesitás verificar tu cuenta nuevamente.
          </p>
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <p class="text-sm text-blue-800">
              Tu cuenta está activa y lista para usar todos los servicios de ONE Internet.
            </p>
          </div>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/login" class="inline-flex items-center justify-center px-6 py-3 bg-principal-500 text-white font-semibold rounded-lg hover:bg-principal-600 transition shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-principal-500">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
              </svg>
              Iniciar sesión
            </a>
            <a href="/" class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200 hover:border-principal-500 hover:text-principal-500 transition">
              Volver al inicio
            </a>
          </div>
        </div>
      </div>

      <!-- Estado: Token ya utilizado -->
      <div id="used-state" class="hidden">
        <div class="bg-white rounded-2xl shadow-xl border-l-4 border-amber-500 p-8 sm:p-12 text-center fade-in-up">
          <div class="mb-8">
            <svg class="mx-auto w-20 h-20 text-amber-500" viewBox="0 0 80 80" aria-hidden="true">
              <circle cx="40" cy="40" r="38" class="opacity-10" fill="currentColor" />
              <circle cx="40" cy="40" r="30" class="opacity-20" fill="currentColor" />
              <path fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" d="M25 40 L35 50 L55 30"/>
              <line x1="20" y1="20" x2="60" y2="60" stroke="currentColor" stroke-width="3" stroke-linecap="round" opacity="0.5"/>
            </svg>
          </div>
          <h1 class="text-2xl sm:text-3xl font-bold text-amber-800 mb-4">
            Este enlace ya fue utilizado
          </h1>
          <p class="text-base sm:text-lg text-gray-600 mb-2">
            Este token de verificación ya fue usado anteriormente.
          </p>
          <p class="text-sm text-gray-500 mb-8">
            Si ya verificaste tu cuenta, podés iniciar sesión. Si no, solicita un nuevo enlace.
          </p>
          <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
            <p class="text-sm text-amber-800 mb-3 font-medium">
              ¿Necesitás un nuevo enlace de verificación?
            </p>
            <button 
              id="resend-verification-btn"
              class="inline-flex items-center justify-center px-4 py-2 bg-amber-600 text-white font-medium rounded-lg hover:bg-amber-700 transition text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-400"
            >
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Reenviar email de verificación
            </button>
          </div>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/login" class="inline-flex items-center justify-center px-6 py-3 bg-principal-500 text-white font-semibold rounded-lg hover:bg-principal-600 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-principal-500">
              Ir al login
            </a>
            <a href="/registro" class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200 hover:border-principal-500 hover:text-principal-500 transition">
              Registrarse de nuevo
            </a>
          </div>
        </div>
      </div>

      <!-- Estado: Sin token -->
      <div id="no-token-state" class="hidden">
        <div class="bg-white rounded-2xl shadow-xl border-l-4 border-gray-400 p-8 sm:p-12 text-center fade-in-up">
          <div class="mb-8">
            <svg class="mx-auto w-20 h-20 text-gray-400" viewBox="0 0 80 80" aria-hidden="true">
              <circle cx="40" cy="40" r="38" class="opacity-10" fill="currentColor" />
              <circle cx="40" cy="40" r="30" class="opacity-20" fill="currentColor" />
              <text x="40" y="50" font-size="40" text-anchor="middle" fill="currentColor">?</text>
            </svg>
          </div>
          <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-4">
            No se proporcionó un token de verificación
          </h1>
          <p class="text-base sm:text-lg text-gray-600 mb-2">
            El enlace de verificación no es válido o está incompleto.
          </p>
          <p class="text-sm text-gray-500 mb-8">
            Por favor, verifica que copiaste correctamente el enlace del correo.
          </p>
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6">
            <p class="text-sm text-gray-700 mb-3 font-medium">
              ¿Necesitás un nuevo enlace de verificación?
            </p>
            <button 
              id="resend-verification-btn"
              class="inline-flex items-center justify-center px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400"
            >
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Reenviar email de verificación
            </button>
          </div>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/login" class="inline-flex items-center justify-center px-6 py-3 bg-principal-500 text-white font-semibold rounded-lg hover:bg-principal-600 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-principal-500">
              Ir al login
            </a>
            <a href="/registro" class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200 hover:border-principal-500 hover:text-principal-500 transition">
              Registrarse de nuevo
            </a>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- FOOTER -->
  <footer class="bg-white border-t border-gray-100 mt-auto">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="text-center text-sm text-gray-500">
        © <span id="year"></span> CREA Servicios Tecnológicos SAPEM - ONE Internet. 
        Todos los derechos reservados.
      </div>
    </div>
  </footer>

  <!-- Scripts auxiliares (cargar PRIMERO para que estén disponibles) -->
  <script src="/js/env.js"></script>
  <script src="/js/utils/logger.js"></script>
  <script src="/js/config.js"></script>
  <script src="/js/utils/http.js"></script>

  <!-- Scripts principales -->
  <script type="module" src="/js/verify-email.js"></script>
  <script type="module" src="/js/encabezado-publico.js"></script>
</body>
</html>
